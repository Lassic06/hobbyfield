<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hobbyfield.app.club.mapper.CreateclubMapper">
	<!-- 소모임 전체조회 -->
	<select id="selectClubAllList" resultType="CreateclubVO">
		SELECT club_number
			   , profile_nickname
			   , club_name
			   , club_category
			   , club_type
			   , club_info
			   , major_location
			   , sub_location
			   , club_public
			   , singup_question1
			   , singup_question2
			   , singup_question3
			   , club_img
			   , club_img_path
			   , club_total
		FROM club
		ORDER BY club_number
	</select>
	
	<!-- 소모임 세부조회 -->
	
	<!-- 소모임 등록 --> <!-- 카테고리/모임IMG등록/인원정수 구현해야함 -->
	<insert id="insertClub" parameterType="CreateclubVO">
		<selectKey keyProperty="clubNumber" resultType="int" order="BEFORE">
			SELECT NVL(MAX(club_number), 0) + 1
			FROM club
		</selectKey>
		INSERT INTO club
				(
					club_number
					, profile_nickname
					, club_name
					, club_category
					, club_type
					, club_info
					, major_location
					, sub_location
					, club_public
					, singup_question1
					, singup_question2
					, singup_question3
					, club_img
					, club_total
				)
		VALUES
				(
					#{clubNumber}
					, #{profileNickname}
					, #{clubName}
					, #{clubCategory}
					, #{clubType}
					, #{clubInfo}
					, #{majorLocation}
					, #{subLocation}
					, #{clubPublic}
					, #{singupQuestion1}
					, #{singupQuestion2}
					, #{singupQuestion3}
					, #{clubImg}
					, 50
				)
			
	</insert>
	
	<!-- 닉네임 중복체크 -->
	<select id="nickChk" resultType="int">
		SELECT count(*) 
		FROM club
		WHERE profile_nickname = #{profileNickname}
	</select>
	
	<!-- 소모임 이름 중복체크 -->
	<select id="clubnameChk" resultType="int">
		SELECT count(*) 
		FROM club
		WHERE club_name = #{clubName}
	</select>
	
	<!-- 지역 대분류 소분류 리스트 -->
	
	
	<!-- 소모임 수정 -->
	
	<!-- 소모임 삭제? -->
	
	<!-- 이미지 등록 -->
	<insert id="ProfileImg" parameterType="CreateclubVO">
		INSERT INTO profile(
			profile_nickname
			,member_email
			,profile_img
			,profile_img_path
			
		)
		VALUES(
			#{profileNickname}
			,#{memberEamil}
			,#{profileImg}
			,#{profileImgPath}
		)
		
	</insert>
</mapper>