<?xml version="1.0" encoding="UTF-8" ?>
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "https://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.hobbyfield.app.member.mapper.MyitemMapper">

	<!-- 나의아이템 전체조회 -->
	<select id="selectMyItemAllList" parameterType="com.hobbyfield.app.member.service.MemberVO" resultType="MyitemVO">
		SELECT myitem_id,
			   point_id,
			   point_opt_id,
			   point_name,
			   FIND_CODE_NM(point_item_type) AS point_item_type,
			   point_price,
			   myitem_purcdt,
			   point_img_name,
			   point_img_path,
			   myitem_useterm
		FROM myitem
		WHERE member_email = #{memberEmail}
	</select>
	
	
	<!-- 나의 아이템 등록 -->
	<insert id="insertMyitem" parameterType="MyitemVO">
		<selectKey keyProperty="myitemId" resultType="int"
			order="BEFORE">
			SELECT NVL(MAX(point_id), 0) + 1
			FROM MYITEM
		</selectKey>
		INSERT INTO MYITEM(
					POINT_PRICE
					POINT_OPT_ID
					POINT_NAME
					POINT_ITEM_TYPE
					POINT_IMG_PATH
					POINT_IMG_NAME
					POINT_ID
					MYITEM_USETERM
					MYITEM_PURCDT
					MYITEM_ID
					MEMBER_EMAIL
		)VALUES(
		#{pointPrice},
		#{optId},
		#{pointName},
		#{pointItemType},
		#{pointImgPath},
		#{pointImgName},
		#{pointId},
		#{myitemUseterm},
		#{myitemPurcdt},
		#{myitemId},
		#{memberEmail}
		)
	</insert>
	
	<!-- 나의 아이템 삭제 -->

</mapper>